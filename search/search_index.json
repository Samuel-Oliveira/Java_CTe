{"config":{"lang":["pt"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"]},"docs":[{"location":"","title":"Java-CTe","text":"<p>API Java para consumo do WebService de CTe</p>"},{"location":"#duvidas-sugestoes-ou-consultoria","title":"D\u00favidas, Sugest\u00f5es ou Consultoria","text":""},{"location":"#gostou-do-projeto-de-sua-colaboracao-pelo-pix-01713390108","title":"Gostou do Projeto? D\u00ea sua colabora\u00e7\u00e3o pelo Pix: 01713390108","text":"<p>Para Iniciar : - Caso use Libs baixe o java-cte-4.00.12.jar e o adicione \u00e0s bibliotecas de Seu Projeto.</p> <ul> <li> <p>Baixe o Schemas.rar e extraia na sua M\u00e1quina.</p> </li> <li> <p>Maven : <pre><code>&lt;dependency&gt;\n    &lt;groupId&gt;br.com.swconsultoria&lt;/groupId&gt;\n    &lt;artifactId&gt;java-cte&lt;/artifactId&gt;\n    &lt;version&gt;4.00.12&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre></p> </li> <li> <p>Gradle : <pre><code>dependencies {\n    implementation \"br.com.swconsultoria:java-cte:4.00.12\"\n}\n</code></pre></p> </li> </ul> <p>Veja a Wiki, para ter um Tutorial Completo.</p>"},{"location":"#historico-de-versoes","title":"Historico de Vers\u00f5es","text":""},{"location":"#v4002-05092023","title":"v4.00.2 - 05/09/2023","text":"<ul> <li>Adicionado todos os Eventos</li> </ul>"},{"location":"#v4001-29082023","title":"v4.00.1 - 29/08/2023","text":"<ul> <li>Atualizado Layout para versao 4.00<ul> <li>Envio CTe</li> <li>Cancelamento Cte</li> <li>Consulta Cte</li> <li>Distribuicao CTe</li> <li>Status Servico</li> </ul> </li> </ul>"},{"location":"#v30011-16082023","title":"v3.00.11 - 16/08/2023","text":"<ul> <li>Correcao de Uso de ContingenciaSVC</li> <li>Atualizado Cacert (Sefaz Minas)</li> </ul>"},{"location":"#v30010-09052023","title":"v3.00.10 - 09/05/2023","text":"<ul> <li>Atualizado Java Certificado (Ver https://github.com/Samuel-Oliveira/Java_Certificado)</li> <li>Atualizado Cacert (Sefaz Minas)</li> </ul>"},{"location":"#v3009-21022023","title":"v3.00.9 - 21/02/2023","text":"<ul> <li>Atualizado Dependencia Java-Certificado</li> <li>Melhorias JAxB</li> <li>Adicionado compatibilidade Java 14+</li> <li>Modificado Logs</li> </ul>"},{"location":"#v3008-15012022","title":"v3.00.8 - 15/01/2022","text":"<ul> <li>Atualizado Dependencia Java-Certificado</li> <li>Corrigido erro NS1 para MT</li> <li>Corrigido erro NS1 para MS</li> <li>Corrigido erro de assinatura para Certificados com Repositorio</li> </ul>"},{"location":"#v3007-01-04-2021","title":"v3.00.7 - 01-04-2021","text":"<ul> <li>Removido Cacert do Projeto, agora o projeto Java Certificados ir\u00e1 gerenciar os Cacerts.</li> <li>Adicionado Retorno de Cte OS</li> <li>Melhoria nos Logs</li> <li>Atualizado Dependencia Java-Certificado</li> </ul>"},{"location":"#v3006-27-04-2020","title":"v3.00.6 - 27-04-2020","text":"<ul> <li>Refatora\u00e7\u00e3o de Classes</li> <li>Adicionado QRCode</li> <li>Atualizado para vers\u00e3o 3.00a</li> <li>Corre\u00e7\u00e3o de Inutiliza\u00e7\u00e3o</li> <li>Corrigido Erros WSDL MS</li> </ul>"},{"location":"#v3005-17-07-2019","title":"v3.00.5 - 17-07-2019","text":"<ul> <li>Removido Endere\u00e7os vers\u00e3o 2.00</li> <li>Limpeza de Classes</li> <li>Adicionado WSDL CTe-OS</li> <li>Corrigido Chamadas para CTe-OS</li> <li>Adiciona Url WebServices Cte-OS</li> </ul>"},{"location":"#v3004-22-01-2019","title":"v3.00.4 - 22-01-2019","text":"<ul> <li>Adicionado Mais convers\u00f5es Object-&gt;String</li> <li>Atualizado Cacert</li> <li>Atualizado biblioteca de certificados</li> <li>Melhoria no Nome de Classes.</li> <li>Corrigido erros Nas COnfigura\u00e7\u00f5es Web</li> <li>Adicionado Todos os Schemas e WSDL</li> <li>Adicionado ao Maven Central</li> </ul>"},{"location":"#v3003-27-08-2018","title":"v3.00.3 - 27-08-2018","text":"<ul> <li>Implementado Padr\u00e3o Web</li> </ul>"},{"location":"#v3002-07-12-2017","title":"v3.00.2 - 07-12-2017","text":"<ul> <li>Atualizado Cacert</li> <li>Corrigido Erro Namespace PR</li> </ul>"},{"location":"#v3001-07-11-2017","title":"v3.00.1 - 07-11-2017","text":"<ul> <li>Atualizado Cacert</li> <li>Corrigido conflito com Nfe</li> <li>Atualizado para rodar somente com Vers\u00e3o 3.00</li> <li>Removido CTe Para Outro Projeto</li> <li>Atualizado Layout e Melhorias de velocidade.</li> </ul>"},{"location":"#v2001-25-09-2017","title":"v2.00.1 - 25-09-2017","text":"<ul> <li>Adicionado Cacert Atual</li> <li>Adicionado Valida\u00e7\u00e3o Para Modal Rodoviario</li> <li>Adicionado DistDfe</li> <li>Atualizado Metodo De verifica\u00e7\u00e3o do Certificado</li> <li>Adicionado JavaDocs</li> <li>Removido a Parte de Certificado Digitais para outro Projeto.</li> <li>Adicionado MDfe ao Projeto</li> <li>Altera\u00e7\u00f5es:</li> <li>'ConfiguracoesIniciaisCte' para 'ConfiguracoesIniciais'</li> <li>'ConstantesUtil' para 'ConstantesCte'</li> <li>'CteException' para 'EmissorException'</li> <li>'VersaoCte' para 'Versao'</li> <li>'ObjectToXml' para 'ObjectCteToXml'</li> <li>Aten\u00e7\u00e3o: Alterado o caminho do Objeto Certificado, refa\u00e7a os Imports.</li> </ul>"},{"location":"#v2000-17-02-2017","title":"v2.00.0 - 17-02-2017","text":"<ul> <li>Vers\u00e3o Inicial Do Sistema</li> </ul>"},{"location":"tutorial/baixar-documento/","title":"Baixar CTe","text":"<p>Fun\u00e7\u00e3o para fazer a Consulta e download de Cte.</p> DistDfeCte.java<pre><code>import br.com.swconsultoria.cte.Cte;\nimport br.com.swconsultoria.cte.dom.ConfiguracoesCte;\nimport br.com.swconsultoria.cte.dom.enuns.ConsultaDFeEnum;\nimport br.com.swconsultoria.cte.dom.enuns.PessoaEnum;\nimport br.com.swconsultoria.cte.dom.enuns.StatusCteEnum;\nimport br.com.swconsultoria.cte.exception.CteException;\nimport br.com.swconsultoria.cte.schema_100.retdistdfeint.RetDistDFeInt;\nimport br.com.swconsultoria.cte.util.XmlCteUtil;\n\n/**\n * @author Samuel Oliveira\n */\npublic class DistDfeCte {\n\n    public static void main(String[] args) {\n\n        try {\n            //Veja https://github.com/Samuel-Oliveira/Java_CTe/wiki/Configura%C3%A7%C3%B5es-CTe\n            ConfiguracoesCte config = ConfigTeste.iniciaConfiguracoes();\n\n            String cnpj = \"12345678901234\"; // TODO Preencher Cnpj\n            String nsu = \"000000000000000\"; // TODO Preencher Nsu\n\n            RetDistDFeInt retorno = Cte.distribuicaoDfe(config, PessoaEnum.JURIDICA, cnpj, ConsultaDFeEnum.NSU, nsu);\n            System.out.println(\"Status:\" + retorno.getCStat());\n            System.out.println(\"Motivo:\" + retorno.getXMotivo());\n            System.out.println(\"Max NSU:\" + retorno.getMaxNSU());\n            System.out.println(\"Ult NSU:\" + retorno.getUltNSU());\n\n            if (StatusCteEnum.DOC_LOCALIZADO_PARA_DESTINATARIO.equals(retorno.getCStat())) {\n\n                List&lt;RetDistDFeInt.LoteDistDFeInt.DocZip&gt; listaDoc = retorno.getLoteDistDFeInt().getDocZip();\n\n                System.out.println(\"Encontrado \" + listaDoc.size() + \" Notas.\");\n                for (RetDistDFeInt.LoteDistDFeInt.DocZip docZip : listaDoc) {\n                    System.out.println(\"Schema: \" + docZip.getSchema());\n                    System.out.println(\"NSU:\" + docZip.getNSU());\n                    System.out.println(\"XML: \" + XmlCteUtil.gZipToXml(docZip.getValue()));\n                }\n            }\n\n        } catch (CteException | IOException e) {\n            System.out.println(\"Erro:\" + e.getMessage());\n        }\n    }\n}\n</code></pre>"},{"location":"tutorial/cancelamento/","title":"Cancelamento","text":"<p>Exemplo de Como Ficaria o Cancelamento da CT-e.</p> CancelarCte.java<pre><code>import br.com.swconsultoria.cte.Cte;\nimport br.com.swconsultoria.cte.dom.ConfiguracoesCte;\nimport br.com.swconsultoria.cte.dom.enuns.StatusCteEnum;\nimport br.com.swconsultoria.cte.exception.CteException;\nimport br.com.swconsultoria.cte.schema_400.evCancCTe.EvCancCTe;\nimport br.com.swconsultoria.cte.schema_400.evCancCTe.TProcEvento;\nimport br.com.swconsultoria.cte.schema_400.evCancCTe.TRetEvento;\nimport br.com.swconsultoria.cte.util.ConstantesCte;\nimport br.com.swconsultoria.cte.util.ObjetoCTeUtil;\nimport br.com.swconsultoria.cte.util.XmlCteUtil;\nimport br.com.swconsultoria.cte.schema_400.evCancCTe.TEvento;\n\nimport javax.xml.bind.JAXBException;\nimport java.time.LocalDateTime;\n\n/**\n * @author Samuel Oliveira\n *\n */\npublic class CancelarCte {\n\n    public static void main(String[] args) {\n\n        try {\n\n            //Veja https://github.com/Samuel-Oliveira/Java_CTe/wiki/Configura%C3%A7%C3%B5es-CTe\n            ConfiguracoesCte config = ConfigTeste.iniciaConfiguracoes();\n\n            String chave = \"\"; // TODO Preencha a Chave\n            String protocolo = \"\"; // TODO Preencha o Protocolo\n            String cnpj = \"\"; // TODO Preencha o Cnpj\n            String numeroSeqCancelamento = \"001\"; // TODO Preencha\n            String eventoCancelamento = \"110111\";\n            String id = \"ID\" + eventoCancelamento + chave + numeroSeqCancelamento;\n            String justificativa = \"Teste de Cancelmento\"; // TODO Preencha\n\n            TEvento enviEvento = new TEvento();\n            enviEvento.setVersao(ConstantesCte.VERSAO.CTE);\n\n            TEvento.InfEvento infoEvento = new TEvento.InfEvento();\n            infoEvento.setId(id);\n            infoEvento.setCOrgao(config.getEstado().getCodigoUF());\n            infoEvento.setTpAmb(config.getAmbiente().getCodigo());\n            infoEvento.setCNPJ(cnpj);\n            infoEvento.setChCTe(chave);\n            infoEvento.setDhEvento(XmlCteUtil.dataCte(LocalDateTime.now()));\n            infoEvento.setTpEvento(eventoCancelamento);\n            infoEvento.setNSeqEvento(Integer.valueOf(numeroSeqCancelamento).toString());\n\n            EvCancCTe eventoCancela = new EvCancCTe();\n            eventoCancela.setDescEvento(\"Cancelamento\");\n            eventoCancela.setNProt(protocolo);\n            eventoCancela.setXJust(justificativa);\n\n            TEvento.InfEvento.DetEvento detEvento = new TEvento.InfEvento.DetEvento();\n            detEvento.setVersaoEvento(ConstantesCte.VERSAO.CTE);\n            detEvento.setAny(ObjetoCTeUtil.objectToElement(eventoCancela, EvCancCTe.class, \"evCancCTe\"));\n\n            infoEvento.setDetEvento(detEvento);\n            enviEvento.setInfEvento(infoEvento);\n\n            TRetEvento retorno = Cte.cancelarCte(config, enviEvento, true);\n\n            if (!retorno.getInfEvento().getCStat().equals(StatusCteEnum.EVENTO_VINCULADO.getCodigo())) {\n\n                System.out.println(\"Erro Status:\" + retorno.getInfEvento().getCStat());\n                System.out.println(\"Erro Motivo:\" + retorno.getInfEvento().getXMotivo());\n\n            } else {\n\n                System.out.println(\"Status:\" + retorno.getInfEvento().getCStat());\n                System.out.println(\"Motivo:\" + retorno.getInfEvento().getXMotivo());\n                System.out.println(\"Data:\" + retorno.getInfEvento().getDhRegEvento());\n\n                // Cria TProcEventoCTe\n                TProcEvento procEvento = new TProcEvento();\n                procEvento.setVersao(ConstantesCte.VERSAO.CTE);\n                procEvento.setEventoCTe(enviEvento);\n                procEvento.setRetEventoCTe(retorno);\n\n                System.out.println(\"Xml Final Cancelamento Proc: \" + XmlCteUtil.objectToXml(procEvento));\n            }\n\n        } catch (CteException | JAXBException e) {\n            System.out.println(\"Erro:\" + e.getMessage());\n        }\n    }\n}\n</code></pre>"},{"location":"tutorial/carta-correcao/","title":"Carta de Corre\u00e7\u00e3o Eletr\u00f4nica","text":"<p>Fun\u00e7\u00e3o para Gerar a Carta De Corre\u00e7\u00e3o Eletr\u00f4nica.</p> CCeCte.java<pre><code>import br.com.swconsultoria.cte.Cte;\nimport br.com.swconsultoria.cte.dom.ConfiguracoesCte;\nimport br.com.swconsultoria.cte.dom.enuns.StatusCteEnum;\nimport br.com.swconsultoria.cte.exception.CteException;\nimport br.com.swconsultoria.cte.schema_400.evCCeCTe.EvCCeCTe;\nimport br.com.swconsultoria.cte.schema_400.evCCeCTe.TEvento;\nimport br.com.swconsultoria.cte.schema_400.evCCeCTe.TProcEvento;\nimport br.com.swconsultoria.cte.schema_400.evCCeCTe.TRetEvento;\nimport br.com.swconsultoria.cte.util.ConstantesCte;\nimport br.com.swconsultoria.cte.util.ObjetoCTeUtil;\nimport br.com.swconsultoria.cte.util.XmlCteUtil;\n\nimport javax.xml.bind.JAXBException;\nimport java.time.LocalDateTime;\n\n/**\n * @author Samuel Oliveira\n */\npublic class CCeCte {\n\n    public static void main(String[] args) {\n\n        try {\n            //Veja https://github.com/Samuel-Oliveira/Java_CTe/wiki/Configura%C3%A7%C3%B5es-CTe\n            ConfiguracoesCte config = ConfigTeste.iniciaConfiguracoes();\n\n            String chave = \"\"; // TODO Preencha a Chave\n            String numeroSeqEvento = \"001\"; // TODO Preencha o NUmero Sequencial com 2 Digitos e Zero a esquerda\n            String codigoEvento = \"110110\";\n            String id = \"ID\" + codigoEvento + chave + numeroSeqEvento;\n            String cnpj = \"\"; // TODO Preencha o Cnpj\n\n            TEvento enviEvento = new TEvento();\n            enviEvento.setVersao(ConstantesCte.VERSAO.CTE);\n\n            TEvento.InfEvento infoEvento = new TEvento.InfEvento();\n            infoEvento.setId(id);\n            infoEvento.setCOrgao(config.getEstado().getCodigoUF());\n            infoEvento.setTpAmb(config.getAmbiente().getCodigo());\n            infoEvento.setCNPJ(cnpj);\n            infoEvento.setChCTe(chave);\n            infoEvento.setDhEvento(XmlCteUtil.dataCte(LocalDateTime.now()));\n            infoEvento.setTpEvento(codigoEvento);\n            infoEvento.setNSeqEvento(Integer.valueOf(numeroSeqEvento).toString());\n\n            EvCCeCTe eventoCCe = new EvCCeCTe();\n            eventoCCe.setDescEvento(\"Carta de Correcao\");\n            eventoCCe.setXCondUso(\"A Carta de Correcao e disciplinada pelo Art. 58-B do CONVENIO/SINIEF 06/89: Fica permitida a utilizacao de carta de correcao, para regularizacao de erro ocorrido na emissao de documentos fiscais relativos a prestacao de servico de transporte, desde que o erro nao esteja relacionado com: I - as variaveis que determinam o valor do imposto tais como: base de calculo, aliquota, diferenca de preco, quantidade, valor da prestacao;II - a correcao de dados cadastrais que implique mudanca do emitente, tomador, remetente ou do destinatario;III - a data de emissao ou de saida.\");\n\n            EvCCeCTe.InfCorrecao infCorrecao = new EvCCeCTe.InfCorrecao();\n            infCorrecao.setGrupoAlterado(\"enderReme\"); // TODO Preencha\n            infCorrecao.setCampoAlterado(\"nro\"); // TODO Preencha\n            infCorrecao.setValorAlterado(\"1234\"); // TODO Preencha\n            eventoCCe.getInfCorrecao().add(infCorrecao);\n\n            TEvento.InfEvento.DetEvento detEvento = new TEvento.InfEvento.DetEvento();\n            detEvento.setVersaoEvento(ConstantesCte.VERSAO.CTE);\n            detEvento.setAny(ObjetoCTeUtil.objectToElement(eventoCCe, EvCCeCTe.class, \"evCCeCTe\"));\n\n            infoEvento.setDetEvento(detEvento);\n            enviEvento.setInfEvento(infoEvento);\n\n            TRetEvento retorno = Cte.cceCte(config, enviEvento, true);\n\n            if (!retorno.getInfEvento().getCStat().equals(StatusCteEnum.EVENTO_VINCULADO.getCodigo())) {\n                System.out.println(\"Erro Status:\" + retorno.getInfEvento().getCStat());\n                System.out.println(\"Erro Motivo:\" + retorno.getInfEvento().getXMotivo());\n            } else {\n\n                System.out.println(\"Status:\" + retorno.getInfEvento().getCStat());\n                System.out.println(\"Motivo:\" + retorno.getInfEvento().getXMotivo());\n                System.out.println(\"Data:\" + retorno.getInfEvento().getDhRegEvento());\n\n                // Cria TProcEventoCTe\n                TProcEvento procEvento = new TProcEvento();\n                procEvento.setVersao(ConstantesCte.VERSAO.CTE);\n                procEvento.setEventoCTe(enviEvento);\n                procEvento.setRetEventoCTe(retorno);\n\n                System.out.println(\"Xml Final Carta de Corre\u00e7\u00e3o Proc: \" + XmlCteUtil.objectToXml(procEvento));\n            }\n\n        } catch (JAXBException | CteException e) {\n            System.out.println(\"Erro:\" + e.getMessage());\n        }\n    }\n}\n</code></pre>"},{"location":"tutorial/configuracoes/","title":"Configura\u00e7\u00f5es","text":"<p>Para executar qualquer fun\u00e7\u00e3o CTe, deve-se inicializar as Configura\u00e7\u00e3o.</p>"},{"location":"tutorial/configuracoes/#certificado-digital","title":"Certificado Digital","text":"StatusCte.java<pre><code>import br.com.swconsultoria.cte.Cte;\nimport br.com.swconsultoria.cte.dom.ConfiguracoesCte;\nimport br.com.swconsultoria.cte.exception.CteException;\nimport br.com.swconsultoria.cte.schema_400.retConsStatServCTe.TRetConsStatServ;\n\n/**\n * @author Samuel Oliveira\n */\npublic class StatusCte {\n\n    public static void main(String[] args) {\n        try {\n\n            //Veja https://github.com/Samuel-Oliveira/Java_CTe/wiki/Configura%C3%A7%C3%B5es-CTe\n            ConfiguracoesCte config = ConfigTeste.iniciaConfiguracoes();\n\n            TRetConsStatServ retorno = Cte.statusServico(config);\n\n            System.out.println(\"Status:\" + retorno.getCStat());\n            System.out.println(\"Motivo:\" + retorno.getXMotivo());\n            System.out.println(\"Data:\" + retorno.getDhRecbto());\n\n        } catch (CteException | CertificadoException e) {\n            System.out.println(\"Erro:\" + e.getMessage());\n        }\n    }\n}\n</code></pre>"},{"location":"tutorial/consulta-situacao/","title":"Consulta Situa\u00e7\u00e3o","text":"<p>Fun\u00e7\u00e3o para fazer a Consulta e download de Cte.</p> DistDfeCte.java<pre><code>import br.com.swconsultoria.cte.Cte;\nimport br.com.swconsultoria.cte.dom.ConfiguracoesCte;\nimport br.com.swconsultoria.cte.dom.enuns.ConsultaDFeEnum;\nimport br.com.swconsultoria.cte.dom.enuns.StatusCteEnum;\nimport br.com.swconsultoria.cte.exception.CteException;\nimport br.com.swconsultoria.cte.schema_100.retdistdfeint.RetDistDFeInt;\nimport br.com.swconsultoria.cte.util.XmlCteUtil;\n\nimport java.io.IOException;\nimport java.util.List;\n\n/**\n * @author Samuel Oliveira\n */\npublic class DistDfeCte {\n\n    public static void main(String[] args) {\n\n        try {\n            //Veja https://github.com/Samuel-Oliveira/Java_CTe/wiki/Configura%C3%A7%C3%B5es-CTe\n            ConfiguracoesCte config = ConfigTeste.iniciaConfiguracoes();\n\n            String cnpj = \"\"; // TODO Preencher Cnpj\n            String nsu = \"000000000000000\"; // TODO Preencher Nsu\n\n            RetDistDFeInt retorno = Cte.distribuicaoDfe(config, br.com.swconsultoria.cte.dom.enuns.PessoaEnum.JURIDICA, cnpj, ConsultaDFeEnum.NSU, nsu);\n            System.out.println(\"Status:\" + retorno.getCStat());\n            System.out.println(\"Motivo:\" + retorno.getXMotivo());\n            System.out.println(\"Max NSU:\" + retorno.getMaxNSU());\n            System.out.println(\"Ult NSU:\" + retorno.getUltNSU());\n\n            if (StatusCteEnum.DOC_LOCALIZADO_PARA_DESTINATARIO.equals(retorno.getCStat())) {\n\n                List&lt;RetDistDFeInt.LoteDistDFeInt.DocZip&gt; listaDoc = retorno.getLoteDistDFeInt().getDocZip();\n\n                System.out.println(\"Encontrado \" + listaDoc.size() + \" Notas.\");\n                for (RetDistDFeInt.LoteDistDFeInt.DocZip docZip : listaDoc) {\n                    System.out.println(\"Schema: \" + docZip.getSchema());\n                    System.out.println(\"NSU:\" + docZip.getNSU());\n                    System.out.println(\"XML: \" + XmlCteUtil.gZipToXml(docZip.getValue()));\n                }\n            }\n\n        } catch (CteException | IOException e) {\n            System.out.println(\"Erro:\" + e.getMessage());\n        }\n\n    }\n}\n</code></pre>"},{"location":"tutorial/envio/","title":"Envio","text":"<p>Exemplo de Como Ficaria o Envio da CT-e.</p> EnvioCte.java<pre><code>package cte;\n\nimport br.com.swconsultoria.cte.Cte;\nimport br.com.swconsultoria.cte.dom.ConfiguracoesCte;\nimport br.com.swconsultoria.cte.dom.enuns.StatusCteEnum;\nimport br.com.swconsultoria.cte.exception.CteException;\nimport br.com.swconsultoria.cte.schema_400.cte.TRetCTe;\nimport br.com.swconsultoria.cte.schema_400.cte.TUFSemEX;\nimport br.com.swconsultoria.cte.schema_400.cte.TUf;\nimport br.com.swconsultoria.cte.schema_400.cteModalRodoviario.Rodo;\nimport br.com.swconsultoria.cte.schema_400.cte.TCTe;\nimport br.com.swconsultoria.cte.util.ChaveUtil;\nimport br.com.swconsultoria.cte.util.ConstantesCte;\nimport br.com.swconsultoria.cte.util.ObjetoCTeUtil;\nimport br.com.swconsultoria.cte.util.XmlCteUtil;\n\nimport java.time.LocalDateTime;\nimport java.util.Random;\n\n/**\n * @author Samuel Oliveira\n */\npublic class EnvioCte {\n\n    public static void main(String[] args) {\n\n        try {\n            //Veja https://github.com/Samuel-Oliveira/Java_CTe/wiki/Configura%C3%A7%C3%B5es-CTe\n            ConfiguracoesCte config = ConfigTeste.iniciaConfiguracoes();\n\n            String cnpj = \"10732644000128\"; //TODO Preencha o Cnpj\n            String modelo = \"57\";\n            int serie = 1;\n            int numero = 224;\n            String tipoEmissao = \"1\";\n            String cct = String.format(\"%08d\", new Random().nextInt(99999999));\n\n            // Inicia As Configura\u00e7\u00f5es\n\n            TCTe cte = new TCTe();\n            TCTe.InfCte infCTe = new TCTe.InfCte();\n\n            // Substitua X Pela Chave\n            ChaveUtil chaveUtil = new ChaveUtil(config.getEstado(),\n                    cnpj, modelo, serie, numero,\n                    tipoEmissao, cct, LocalDateTime.now());\n\n            String chave = chaveUtil.getChaveCT();\n\n            infCTe.setId(chave);\n            infCTe.setVersao(ConstantesCte.VERSAO.CTE);\n\n            TCTe.InfCte.Ide ide = new TCTe.InfCte.Ide();\n            ide.setCUF(config.getEstado().getCodigoUF());\n            ide.setCCT(cct);\n            ide.setCFOP(\"5351\");\n            ide.setNatOp(\"TRANSPORTE INTERNO\");\n            ide.setMod(modelo);\n            ide.setSerie(String.valueOf(serie));\n            ide.setNCT(String.valueOf(numero));\n            ide.setDhEmi(XmlCteUtil.dataCte(LocalDateTime.now()));\n            ide.setTpImp(\"1\");\n            ide.setTpEmis(tipoEmissao);\n            ide.setCDV(chaveUtil.getDigitoVerificador());\n            ide.setTpAmb(config.getAmbiente().getCodigo());\n            ide.setTpCTe(\"0\");\n            ide.setProcEmi(\"0\");\n            ide.setVerProc(\"1.0\");\n            ide.setCMunEnv(\"5219753\");\n            ide.setXMunEnv(\"Anapolis\");\n            ide.setUFEnv(TUf.valueOf(\"GO\"));\n            ide.setModal(\"01\");\n            ide.setTpServ(\"0\");\n            ide.setCMunIni(\"5219753\");\n            ide.setXMunIni(\"Anapolis\");\n            ide.setUFIni(TUf.valueOf(\"GO\"));\n            ide.setCMunFim(\"5219753\");\n            ide.setXMunFim(\"Anapolis\");\n            ide.setUFFim(TUf.valueOf(\"GO\"));\n            ide.setRetira(\"1\");\n            ide.setIndIEToma(\"1\");\n\n            TCTe.InfCte.Ide.Toma3 toma3 = new TCTe.InfCte.Ide.Toma3();\n            toma3.setToma(\"3\");\n            ide.setToma3(toma3);\n            infCTe.setIde(ide);\n\n            TCTe.InfCte.Compl compl = new TCTe.InfCte.Compl();\n            compl.setXObs(\"FORMA DE PAGAMENTO DEPOSITO BANCARIO,FAVOR ENVIAR COPIA DO COMPROVANTE PARA O TRANSPORTADOR E ANEXAR VIA A DA CONTABILIDADE\");\n            infCTe.setCompl(compl);\n\n            TCTe.InfCte.Emit emit = new TCTe.InfCte.Emit();\n            emit.setCNPJ(cnpj);\n            emit.setIE(\"104519304\");\n            emit.setXNome(\"TRC TRANSPORTES LTDA\");\n            emit.setXFant(\"TRC TRANSPORTES LTDA\");\n            emit.setCRT(\"1\");\n\n            br.com.swconsultoria.cte.schema_400.cte.TEndeEmi enderEmit = new br.com.swconsultoria.cte.schema_400.cte.TEndeEmi();\n            enderEmit.setXLgr(\"AV SANTO ANTONIO &amp; CIA\");\n            enderEmit.setNro(\"0\");\n            enderEmit.setXCpl(\"QD 17 LT 01-02-03\");\n            enderEmit.setXBairro(\"PQ STO ANTONIO\");\n            enderEmit.setCMun(\"5219753\");\n            enderEmit.setXMun(\"SANTO ANTONIO DO DESCOBERTO\");\n            enderEmit.setUF(TUFSemEX.valueOf(\"GO\"));\n            enderEmit.setCEP(\"72900000\");\n            enderEmit.setFone(\"6233215175\");\n\n            emit.setEnderEmit(enderEmit);\n            infCTe.setEmit(emit);\n\n            TCTe.InfCte.Rem rem = new TCTe.InfCte.Rem();\n            rem.setCNPJ(\"01241994000605\");\n            rem.setIE(\"103255788\");\n            rem.setXNome(\"CT-E EMITIDO EM AMBIENTE DE HOMOLOGACAO - SEM VALOR FISCAL\");\n            rem.setEmail(\"samuel@autocomsistemas.com.br\");\n\n            br.com.swconsultoria.cte.schema_400.cte.TEndereco enderRem = new br.com.swconsultoria.cte.schema_400.cte.TEndereco();\n            enderRem.setXLgr(\"Rua: Teste\");\n            enderRem.setNro(\"0\");\n            enderRem.setXBairro(\"TESTE\");\n            enderRem.setCMun(\"5219753\");\n            enderRem.setXMun(\"SANTO ANTONIO DO DESCOBERTO\");\n            enderRem.setUF(TUf.GO);\n            enderRem.setCEP(\"75120683\");\n            enderRem.setCPais(\"1058\");\n            enderRem.setXPais(\"Brasil\");\n            rem.setEnderReme(enderRem);\n            infCTe.setRem(rem);\n\n            TCTe.InfCte.Dest dest = new TCTe.InfCte.Dest();\n            dest.setCNPJ(\"07826959000120\");\n            dest.setIE(\"104024585\");\n            dest.setXNome(\"CT-E EMITIDO EM AMBIENTE DE HOMOLOGACAO - SEM VALOR FISCAL\");\n            dest.setEmail(\"samuel@autocomsistemas.com.br\");\n\n            br.com.swconsultoria.cte.schema_400.cte.TEndereco enderDest = new br.com.swconsultoria.cte.schema_400.cte.TEndereco();\n            enderDest.setXLgr(\"Rua: Teste\");\n            enderDest.setNro(\"0\");\n            enderDest.setXBairro(\"TESTE\");\n            enderDest.setCMun(\"5219753\");\n            enderDest.setXMun(\"SANTO ANTONIO DO DESCOBERTO\");\n            enderDest.setUF(TUf.GO);\n            enderDest.setCEP(\"75120683\");\n            enderDest.setCPais(\"1058\");\n            enderDest.setXPais(\"Brasil\");\n            dest.setEnderDest(enderDest);\n            infCTe.setDest(dest);\n\n            TCTe.InfCte.VPrest prest = new TCTe.InfCte.VPrest();\n            prest.setVTPrest(\"410.00\");\n            prest.setVRec(\"410.00\");\n\n            TCTe.InfCte.VPrest.Comp comp = new TCTe.InfCte.VPrest.Comp();\n            comp.setVComp(\"500.00\");\n            comp.setXNome(\"TESTE\");\n            prest.getComp().add(comp);\n            infCTe.setVPrest(prest);\n\n            TCTe.InfCte.Imp imp = new TCTe.InfCte.Imp();\n\n            br.com.swconsultoria.cte.schema_400.cte.TImp icms = new br.com.swconsultoria.cte.schema_400.cte.TImp();\n\n            br.com.swconsultoria.cte.schema_400.cte.TImp.ICMS45 icms45 = new br.com.swconsultoria.cte.schema_400.cte.TImp.ICMS45();\n            icms45.setCST(\"40\");\n            icms.setICMS45(icms45);\n\n            imp.setICMS(icms);\n            infCTe.setImp(imp);\n\n            TCTe.InfCte.InfCTeNorm infCTeNorm = new TCTe.InfCte.InfCTeNorm();\n\n            TCTe.InfCte.InfCTeNorm.InfCarga infCarga = new TCTe.InfCte.InfCTeNorm.InfCarga();\n            infCarga.setVCarga(\"29100.00\");\n            infCarga.setProPred(\"OLEO DIESEL\");\n\n            TCTe.InfCte.InfCTeNorm.InfCarga.InfQ infQ = new TCTe.InfCte.InfCTeNorm.InfCarga.InfQ();\n            infQ.setCUnid(\"04\");\n            infQ.setTpMed(\"LT\");\n            infQ.setQCarga(\"10000.0000\");\n            infCarga.getInfQ().add(infQ);\n\n            TCTe.InfCte.InfCTeNorm.InfDoc infDoc = new TCTe.InfCte.InfCTeNorm.InfDoc();\n\n            TCTe.InfCte.InfCTeNorm.InfDoc.InfNFe infNFe = new TCTe.InfCte.InfCTeNorm.InfDoc.InfNFe();\n            infNFe.setChave(\"52170101241994000605550030002868271002045403\");\n            infDoc.getInfNFe().add(infNFe);\n\n            TCTe.InfCte.InfCTeNorm.InfModal infModal = new TCTe.InfCte.InfCTeNorm.InfModal();\n            infModal.setVersaoModal(ConstantesCte.VERSAO.CTE);\n\n            Rodo rodo = new Rodo();\n            rodo.setRNTRC(\"47008950\");\n\n            infModal.setAny(ObjetoCTeUtil.objectToElement(rodo, Rodo.class, \"rodo\"));\n\n            infCTeNorm.setInfCarga(infCarga);\n            infCTeNorm.setInfDoc(infDoc);\n            infCTeNorm.setInfModal(infModal);\n\n            infCTe.setInfCTeNorm(infCTeNorm);\n            cte.setInfCte(infCTe);\n            // MOnta e Assina o XML\n            TCTe enviCTe = Cte.montaCte(config, cte, true);\n\n            //Adiciona QRCode\n            TCTe.InfCTeSupl infCTeSupl = new TCTe.InfCTeSupl();\n            infCTeSupl.setQrCodCTe(ObjetoCTeUtil.criaQRCode(\n                    cte.getInfCte().getId().substring(3),\n                    config));\n\n            enviCTe.setInfCTeSupl(infCTeSupl);\n\n            // Envia a Cte para a Sefaz\n            TRetCTe retorno = Cte.enviarCte(config, enviCTe);\n            if (!retorno.getCStat().equals(StatusCteEnum.AUTORIZADO.getCodigo())) {\n                throw new CteException(\"Status:\" + retorno.getCStat() + \" - Motivo:\" + retorno.getXMotivo());\n            }\n\n            System.out.println(\"Status: \" + retorno.getProtCTe().getInfProt().getCStat() + \" - \" + retorno.getProtCTe().getInfProt().getXMotivo());\n            System.out.println(\"Data: \" + retorno.getProtCTe().getInfProt().getDhRecbto());\n\n\n            System.out.println(\"Protocolo: \" + retorno.getProtCTe().getInfProt().getNProt());\n            System.out.println(\"XML Final: \" + XmlCteUtil.criaCteProc(enviCTe, retorno.getProtCTe()));\n\n\n        } catch (Exception e) {\n            System.out.println(\"Erro:\" + e.getMessage());\n        }\n\n\n    }\n\n}\n</code></pre>"},{"location":"tutorial/status-servico/","title":"Status de Servi\u00e7o","text":"<p>Fun\u00e7\u00e3o para consultar o Status de Servi\u00e7o Da Sefaz.</p> StatusCte.java<pre><code>import br.com.swconsultoria.cte.Cte;\nimport br.com.swconsultoria.cte.dom.ConfiguracoesCte;\nimport br.com.swconsultoria.cte.exception.CteException;\nimport br.com.swconsultoria.cte.schema_400.retConsStatServCTe.TRetConsStatServ;\n\n/**\n * @author Samuel Oliveira\n */\npublic class StatusCte {\n\n    public static void main(String[] args) {\n        try {\n\n            //Veja https://github.com/Samuel-Oliveira/Java_CTe/wiki/Configura%C3%A7%C3%B5es-CTe\n            ConfiguracoesCte config = ConfigTeste.iniciaConfiguracoes();\n\n            TRetConsStatServ retorno = Cte.statusServico(config);\n\n            System.out.println(\"Status:\" + retorno.getCStat());\n            System.out.println(\"Motivo:\" + retorno.getXMotivo());\n            System.out.println(\"Data:\" + retorno.getDhRecbto());\n\n        } catch (CteException e) {\n            System.out.println(\"Erro:\" + e.getMessage());\n        }\n    }\n}\n</code></pre>"}]}